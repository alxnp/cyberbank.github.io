<!DOCTYPE html>
<html lang="en">


<head>
<meta charset="utf-8" />
<title>Game1</title>
</head>

<body style="margin: 0;">

<canvas id="canvas" style="display: block;position: absolute;"></canvas>
<canvas id="enemy" style="display: block;position: absolute;"></canvas>
<canvas id="player" style="display: block;position: absolute;"></canvas>

<script>
window.onload = init;
var canv = document.getElementById('canvas'),  ctx = canv.getContext('2d'),
    player = document.getElementById('player'),  ctxplayer = player.getContext('2d'),
    enemy = document.getElementById('enemy'),  ctxenemy = enemy.getContext('2d');
    
    canv.width = window.innerWidth;    canv.height = window.innerHeight;
    player.width = window.innerWidth;    player.height = window.innerHeight;
    enemy.width = window.innerWidth;    enemy.height = window.innerHeight;

document.body.appendChild(player);
    
var isMD=false;
var mousePos = { x:0, y:0 };
var lastPos = mousePos;
var bg = new Image();  
var pl = new Image();
var enm = new Image(); 
     
var plX=player.width*0.42,plY=player.height*0.85,plW=player.width*0.15,plH=player.height*0.15;
var enemyX=0,enemyY=0,enemyW=enemy.width,enemyH=enemy.height*0.2;

var raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;
var isPlaying;

function init() 
{  

	
   bg.src    = "bg.png";  
   bg.onload = function() {  ctx.drawImage(bg, 0, 0,canv.width,canv.height);  }
   pl.src    = "01.png"; 
   pl.onload = function() { ctxplayer.drawImage(pl,plX, plY,plW,plH);  }
   enm.src    = "enemy.png"; 
   enm.onload = function() { ctxenemy.drawImage(enm,enemyX, enemyY,enemyW,enemyH);  }
   
   startloop();
}

function loop () 
{
	if (isPlaying) 
	{
		update();raf(loop);
	}
}	

function startloop () 
{
	isPlaying=true;loop();
}

function stoploop () 
{
	isPlaying=false;
}

function update () 
{   
	ctxplayer.clearRect(0,0,player.width,player.height);
    ctxenemy.clearRect(0,0,enemy.width,enemy.height);
  /* 
    player.addEventListener('mousedown', function(e)
	{	isMD=true;	plX=e.clientX-50;});
	player.addEventListener('mouseup', function()
	{	isMD=false;	});
	
	player.addEventListener('mousemove', function(e)
	{
	if (isMD) plX=e.clientX-50;	
	});
*/
player.addEventListener('touchmove', function(e) {
  plX=e.touches[0].pageX-e.target.offsetLeft;
});

player.addEventListener('touchstart', function(e) {
  plX=e.touches[0].pageX-e.target.offsetLeft;
});


    
	ctxplayer.drawImage(pl,plX, plY,plW,plH);  
	
	ctxenemy.drawImage(enm,enemyX, ++enemyY,enemyW,enemyH);
	
	


}




</script>	

</body>

</html>
